<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Practice Mode - Sinhala Sign Language LMS</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="design-system.css">
<style>
/* Practice Mode Specific Styles */
body {
    background: linear-gradient(135deg, var(--primary-50) 0%, var(--secondary-50) 100%);
    min-height: 100vh;
    font-family: var(--font-family-sinhala);
}

.navbar {
    background: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-md);
    border-bottom: 1px solid var(--neutral-200);
}

.navbar-brand {
    font-weight: var(--font-bold);
    color: var(--primary-700) !important;
    font-size: var(--text-xl);
}

.nav-link {
    font-weight: var(--font-medium);
    color: var(--neutral-600) !important;
    transition: color var(--transition-fast);
}

.nav-link:hover, .nav-link.active {
    color: var(--primary-600) !important;
}

.main-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--space-6);
}

.practice-header {
    text-align: center;
    margin-bottom: var(--space-8);
    animation: fadeIn 0.8s ease-out;
}

.practice-title {
    font-size: var(--text-4xl);
    font-weight: var(--font-bold);
    color: var(--neutral-800);
    margin-bottom: var(--space-2);
}

.practice-subtitle {
    font-size: var(--text-lg);
    color: var(--neutral-600);
    margin-bottom: var(--space-6);
}

.progress-section {
    background: white;
    border-radius: var(--radius-2xl);
    padding: var(--space-6);
    box-shadow: var(--shadow-lg);
    margin-bottom: var(--space-6);
    animation: slideUp 0.6s ease-out;
}

.progress-title {
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--neutral-800);
    margin-bottom: var(--space-4);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.progress-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-4);
    margin-bottom: var(--space-4);
}

.stat-item {
    text-align: center;
    padding: var(--space-4);
    background: var(--neutral-50);
    border-radius: var(--radius-xl);
    border: 1px solid var(--neutral-200);
}

.stat-value {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: var(--primary-600);
    display: block;
}

.stat-label {
    font-size: var(--text-sm);
    color: var(--neutral-600);
    margin-top: var(--space-1);
}

.letter-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: var(--space-3);
    margin: var(--space-6) 0;
}

.letter-item {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border: 2px solid var(--neutral-200);
    border-radius: var(--radius-xl);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    cursor: pointer;
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

.letter-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    transition: left 0.5s;
}

.letter-item:hover::before {
    left: 100%;
}

.letter-item:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary-300);
}

.letter-item.completed {
    background: linear-gradient(135deg, var(--success-500) 0%, var(--success-600) 100%);
    color: white;
    border-color: var(--success-600);
    box-shadow: var(--shadow-md);
}

.letter-item.completed::after {
    content: 'âœ“';
    position: absolute;
    top: var(--space-1);
    right: var(--space-1);
    font-size: var(--text-sm);
    background: rgba(255,255,255,0.9);
    color: var(--success-600);
    border-radius: var(--radius-full);
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: var(--font-bold);
}

.letter-item.current {
    background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%);
    color: white;
    border-color: var(--primary-600);
    animation: pulse 2s infinite;
    box-shadow: var(--shadow-lg);
}

.letter-item.current::after {
    content: 'ðŸŽ¯';
    position: absolute;
    top: var(--space-1);
    right: var(--space-1);
    font-size: var(--text-sm);
}

.practice-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-6);
    margin-bottom: var(--space-6);
}

.video-section {
    background: white;
    border-radius: var(--radius-2xl);
    padding: var(--space-6);
    box-shadow: var(--shadow-lg);
    animation: slideUp 0.8s ease-out;
}

.video-title {
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--neutral-800);
    margin-bottom: var(--space-4);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.video-container {
    position: relative;
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: var(--shadow-md);
    background: var(--neutral-900);
    margin-bottom: var(--space-4);
}

#webcam {
    width: 100%;
    height: auto;
    display: block;
    min-height: 300px;
    object-fit: cover;
}

.detection-overlay {
    position: absolute;
    top: var(--space-4);
    left: var(--space-4);
    right: var(--space-4);
    background: rgba(0,0,0,0.8);
    color: white;
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    backdrop-filter: blur(10px);
}

.confidence-meter {
    margin-top: var(--space-2);
}

.confidence-bar {
    height: 6px;
    background: rgba(255,255,255,0.2);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.confidence-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--warning-400) 0%, var(--success-400) 100%);
    border-radius: var(--radius-full);
    transition: width var(--transition-normal);
}

.instruction-section {
    background: white;
    border-radius: var(--radius-2xl);
    padding: var(--space-6);
    box-shadow: var(--shadow-lg);
    animation: slideUp 1s ease-out;
}

.instruction-title {
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--neutral-800);
    margin-bottom: var(--space-4);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.sign-display {
    font-size: var(--text-6xl);
    font-weight: var(--font-bold);
    color: var(--primary-600);
    text-align: center;
    margin: var(--space-6) 0;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    animation: bounce 1s ease-in-out;
}

.sign-image {
    width: 100%;
    max-width: 300px;
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    background: white;
    padding: var(--space-4);
    margin: var(--space-4) auto;
    display: block;
}

.attempts-indicator {
    display: flex;
    justify-content: center;
    gap: var(--space-2);
    margin: var(--space-4) 0;
}

.attempt-dot {
    width: 24px;
    height: 24px;
    border-radius: var(--radius-full);
    background: var(--neutral-200);
    transition: all var(--transition-normal);
    border: 2px solid var(--neutral-300);
}

.attempt-dot.completed {
    background: var(--success-500);
    border-color: var(--success-600);
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
}

.feedback-box {
    padding: var(--space-4);
    border-radius: var(--radius-xl);
    margin: var(--space-4) 0;
    font-size: var(--text-lg);
    font-weight: var(--font-medium);
    text-align: center;
    transition: all var(--transition-normal);
    border: 2px solid;
}

.feedback-success {
    background: var(--success-50);
    color: var(--success-800);
    border-color: var(--success-200);
    animation: slideUp 0.5s ease-out;
}

.feedback-error {
    background: var(--error-50);
    color: var(--error-800);
    border-color: var(--error-200);
    animation: slideUp 0.5s ease-out;
}

.feedback-waiting {
    background: var(--warning-50);
    color: var(--warning-800);
    border-color: var(--warning-200);
}

.action-buttons {
    display: flex;
    gap: var(--space-3);
    margin-top: var(--space-4);
    flex-wrap: wrap;
}

.btn-next {
    flex: 1;
    min-width: 150px;
}

.btn-skip {
    background: var(--neutral-100);
    color: var(--neutral-600);
    border: 1px solid var(--neutral-300);
}

.btn-skip:hover:not(:disabled) {
    background: var(--neutral-200);
    color: var(--neutral-700);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-4);
    margin-top: var(--space-6);
}

.stat-card {
    background: white;
    padding: var(--space-4);
    border-radius: var(--radius-xl);
    text-align: center;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--neutral-200);
    transition: all var(--transition-normal);
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.stat-value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--primary-600);
    display: block;
}

.stat-label {
    font-size: var(--text-sm);
    color: var(--neutral-600);
    margin-top: var(--space-1);
    font-weight: var(--font-medium);
}

.completion-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: var(--z-modal);
    backdrop-filter: blur(5px);
}

.completion-modal.show {
    display: flex;
    animation: fadeIn 0.3s ease-out;
}

.completion-content {
    background: white;
    padding: var(--space-8);
    border-radius: var(--radius-3xl);
    text-align: center;
    max-width: 500px;
    width: 90%;
    animation: slideUp 0.5s ease-out;
    box-shadow: var(--shadow-2xl);
}

.celebration {
    font-size: var(--text-6xl);
    margin-bottom: var(--space-4);
    animation: bounce 1s ease-in-out;
}

.completion-title {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: var(--neutral-800);
    margin-bottom: var(--space-2);
}

.completion-subtitle {
    font-size: var(--text-lg);
    color: var(--neutral-600);
    margin-bottom: var(--space-6);
}

/* Responsive Design */
@media (max-width: 1024px) {
    .practice-content {
        grid-template-columns: 1fr;
    }
    
    .letter-grid {
        grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    }
}

@media (max-width: 768px) {
    .main-container {
        padding: var(--space-4);
    }
    
    .practice-title {
        font-size: var(--text-3xl);
    }
    
    .sign-display {
        font-size: var(--text-5xl);
    }
    
    .letter-grid {
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
        gap: var(--space-2);
    }
    
    .letter-item {
        font-size: var(--text-xl);
    }
    
    .action-buttons {
        flex-direction: column;
    }
    
    .btn-next, .btn-skip {
        width: 100%;
    }
}

/* Accessibility Improvements */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

.letter-item:focus {
    outline: 3px solid var(--primary-500);
    outline-offset: 2px;
}

.btn:focus {
    outline: 3px solid var(--primary-500);
    outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .letter-item {
        border-width: 3px;
    }
    
    .feedback-box {
        border-width: 3px;
    }
}
</style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                <span class="text-sinhala">ðŸ¤Ÿ à·ƒà·’à¶‚à·„à¶½ à¶…à¶­à·Š à¶½à¶šà·”à¶«à·” LMS</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="practice.html" aria-current="page">Practice</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="exam.html">Exam</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container" style="margin-top: 80px;">
        <!-- Header -->
        <div class="practice-header">
            <h1 class="practice-title text-sinhala">ðŸŽ¯ Practice Mode</h1>
            <p class="practice-subtitle">Master each Sinhala sign with guided practice and real-time feedback</p>
        </div>

        <!-- Progress Section -->
        <div class="progress-section">
            <h2 class="progress-title">
                <span>ðŸ“Š</span>
                <span class="text-sinhala">Overall Progress</span>
            </h2>
            <div class="progress-stats">
                <div class="stat-item">
                    <span class="stat-value" id="completed-count">0</span>
                    <span class="stat-label">Letters Mastered</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="total-count">10</span>
                    <span class="stat-label">Total Letters</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="success-rate">0%</span>
                    <span class="stat-label">Success Rate</span>
                </div>
            </div>
            <div class="progress progress-lg">
                <div id="overall-progress" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
            </div>
        </div>

        <!-- Letter Grid -->
        <div class="progress-section">
            <h3 class="progress-title">
                <span>ðŸ”¤</span>
                <span class="text-sinhala">Letter Progress</span>
            </h3>
            <div class="letter-grid" id="letter-grid" role="grid" aria-label="Sinhala letters progress">
                <!-- Letters will be populated by JavaScript -->
            </div>
        </div>

        <!-- Practice Content -->
        <div class="practice-content">
            <!-- Video Section -->
            <div class="video-section">
                <h3 class="video-title">
                    <span>ðŸ“¹</span>
                    <span>Your Camera</span>
                </h3>
                <div class="video-container">
                    <video id="webcam" autoplay playsinline muted aria-label="Webcam feed for sign recognition"></video>
                    <div class="detection-overlay">
                        <div id="prediction-text">Initializing camera...</div>
                        <div class="confidence-meter">
                            <div class="confidence-bar">
                                <div id="confidence-fill" class="confidence-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Instruction Section -->
            <div class="instruction-section">
                <h3 class="instruction-title">
                    <span>ðŸŽ¯</span>
                    <span>Current Sign</span>
                </h3>
                <div class="sign-display text-sinhala" id="current-letter" aria-live="polite">...</div>
                <img id="sign-image" class="sign-image" src="images/placeholder.jpg" alt="Sign demonstration image">
                
                <div class="attempts-indicator" aria-label="Progress indicators">
                    <div class="attempt-dot" aria-label="Attempt 1"></div>
                    <div class="attempt-dot" aria-label="Attempt 2"></div>
                    <div class="attempt-dot" aria-label="Attempt 3"></div>
                </div>
                
                <div id="feedback-box" class="feedback-box feedback-waiting" role="status" aria-live="polite">
                    Start signing to begin!
                </div>
                
                <div class="action-buttons">
                    <button id="next-button" class="btn btn-primary btn-lg btn-next" disabled>
                        <span>Next Letter</span>
                        <span>â†’</span>
                    </button>
                    <button id="skip-button" class="btn btn-skip btn-lg">
                        Skip This Letter
                    </button>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-value" id="total-attempts">0</span>
                <span class="stat-label">Total Attempts</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="current-streak">0</span>
                <span class="stat-label">Current Streak</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="accuracy">0%</span>
                <span class="stat-label">Accuracy</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="time-spent">0m</span>
                <span class="stat-label">Time Spent</span>
            </div>
        </div>
    </div>

    <!-- Completion Modal -->
    <div id="completion-modal" class="completion-modal" role="dialog" aria-labelledby="completion-title" aria-modal="true">
        <div class="completion-content">
            <div class="celebration">ðŸŽ‰</div>
            <h2 id="completion-title" class="completion-title text-sinhala">Letter Mastered!</h2>
            <p class="completion-subtitle">Great job! You've successfully completed <strong id="completed-letter" class="text-sinhala"></strong></p>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value" id="modal-attempts">3</span>
                    <span class="stat-label">Attempts Used</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="modal-accuracy">100%</span>
                    <span class="stat-label">Accuracy</span>
                </div>
            </div>
            <button class="btn btn-primary btn-lg mt-4" onclick="closeCompletionModal()">
                Continue Learning â†’
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="accessibility.js"></script>
    <script src="performance.js"></script>
    <script src="script.js"></script>
</body>
</html>